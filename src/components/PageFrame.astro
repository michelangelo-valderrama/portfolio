<div
  id="page-frame"
  class="p-[var(--fp)] size-full fixed top-0 left-0 bg-[hsl(var(--frame-color))]"
>
  <div class="relative size-full rounded-2xl bg-background"></div>
</div>

<script>
  const sections = document.querySelectorAll<HTMLDivElement>("[section]")

  sections.forEach((s) => {
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            document.body.style.setProperty(
              "--frame-color",
              `${s.dataset.frameColor}`
            )
            document.body.style.setProperty(
              "--header-foreground",
              `${s.dataset.headerForeground}`
            )
            document.body.style.setProperty(
              "--foreground",
              `${s.dataset.bodyForeground}`
            )
            document.body.style.setProperty(
              "--background",
              `${s.dataset.bodyBackground}`
            )
          }
        })
      },
      {
        threshold: s.dataset.threshold ? +s.dataset.threshold : 0.5,
      }
    )
    observer.observe(s)
  })
</script>
